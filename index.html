<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FWFS — 漁人碼頭足球場｜線上預約</title>
<meta name="description" content="澳門漁人碼頭足球場｜人造草地｜多功能運動草地｜線上預約租場"/>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="icon" href="/assets/logo.png"/>
<style>
  :root{
    --accent:#7C3AED; /* purple-600 */
    --accent-2:#22C55E; /* green-500 */
  }
  html,body{scroll-behavior:smooth}
  .blurglass{backdrop-filter:blur(16px) saturate(140%); background:rgba(255,255,255,.55);}
  .fade{opacity:0; transform:translateY(8px); animation:fadeIn .6s ease forwards; }
  @keyframes fadeIn{to{opacity:1; transform:none}}
</style>
</head>
<body class="antialiased bg-white text-slate-900 selection:bg-violet-200/60">
  <!-- Top promo -->
  <div class="bg-gradient-to-r from-[var(--accent)] to-[var(--accent-2)] text-white text-sm">
    <div class="max-w-7xl mx-auto px-5 py-2 flex items-center justify-between">
      <span>🎯 期間限定 <b>8 折優惠</b></span>
      <a href="#booking" class="underline decoration-white/70 hover:opacity-90">立即預約</a>
    </div>
  </div>

  <!-- Navigation -->
  <header class="sticky top-0 z-40 border-b border-black/5 bg-white/70 blurglass">
    <div class="max-w-7xl mx-auto px-5 py-3 flex items-center justify-between">
      <a href="#" class="flex items-center gap-3">
        <img src="/assets/logo.png" class="h-9 w-9 object-contain" alt="FWFS"/>
        <div class="leading-tight">
          <p class="font-semibold">漁人碼頭足球場</p>
          <p class="text-xs text-slate-600">Fisherman’s Wharf Football Stadium</p>
        </div>
      </a>
      <nav class="hidden md:flex items-center gap-8 text-sm">
        <a href="#about" class="hover:text-slate-600">關於</a>
        <a href="#pricing" class="hover:text-slate-600">價目</a>
        <a href="#booking" class="hover:text-slate-600">預約</a>
        <a href="#contact" class="hover:text-slate-600">聯絡</a>
      </nav>
      <a href="#booking" class="rounded-full px-4 py-2 bg-black text-white text-sm hover:opacity-90">預約場地</a>
    </div>
  </header>

  <!-- Hero -->
  <section class="relative overflow-hidden">
    <div class="absolute inset-0 -z-10">
      <div class="h-full w-full bg-[radial-gradient(1000px_500px_at_10%_0%,rgba(124,58,237,.10),transparent_60%),radial-gradient(900px_400px_at_90%_20%,rgba(34,197,94,.10),transparent_55%)]"></div>
    </div>
    <div class="max-w-7xl mx-auto px-5 py-20 grid md:grid-cols-12 gap-10 items-center">
      <div class="md:col-span-7 fade">
        <h1 class="text-4xl md:text-6xl font-semibold tracking-tight leading-[1.1]">
          足球場 🏟️  人造草地 🌱  歡迎租場 🤝
        </h1>
        <p class="mt-5 text-lg text-slate-700 leading-7">
          澳門漁人碼頭足球場（<b>50×30 m</b>）多功能運動草地，開放時間 <b>09:00–22:00</b>。<br/>
          線上預約避免重覆時段，快速完成登記。
        </p>
        <div class="mt-8 flex flex-wrap gap-3">
          <a href="#booking" class="rounded-full px-6 py-3 bg-black text-white hover:opacity-90">立即預約</a>
          <a href="#pricing" class="rounded-full px-6 py-3 border border-slate-300 hover:bg-slate-50">查看價目</a>
        </div>
        <div class="mt-6 grid grid-cols-3 gap-4 text-sm">
          <div class="rounded-xl border border-slate-200 p-4"><p class="text-slate-500">尺寸</p><p class="font-medium">50×30 m</p></div>
          <div class="rounded-xl border border-slate-200 p-4"><p class="text-slate-500">材質</p><p class="font-medium">人造草地</p></div>
          <div class="rounded-xl border border-slate-200 p-4"><p class="text-slate-500">時間</p><p class="font-medium">09:00–22:00</p></div>
        </div>
      </div>
      <div class="md:col-span-5">
        <div class="rounded-3xl border border-slate-200 bg-white shadow-sm p-6">
          <img src="/assets/logo.png" class="mx-auto max-h-60 object-contain" alt="FWFS logo"/>
          <div class="mt-6 grid grid-cols-2 gap-3 text-sm">
            <div class="rounded-xl bg-violet-50 text-violet-700 border border-violet-200 p-3">周一–五：MOP 500/hr <span class="opacity-60">(8折 400)</span></div>
            <div class="rounded-xl bg-emerald-50 text-emerald-700 border border-emerald-200 p-3">週末/假：MOP 600/hr <span class="opacity-60">(8折 480)</span></div>
            <div class="rounded-xl bg-slate-50 text-slate-700 border border-slate-200 p-3 col-span-2">夜間 18–22：MOP 800/hr <span class="opacity-60">(8折 640)</span></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Pricing (with your poster) -->
  <section id="pricing" class="max-w-7xl mx-auto px-5 py-16">
    <div class="flex items-center justify-between">
      <h2 class="text-2xl font-semibold">價目表</h2>
      <span class="inline-flex items-center gap-2 rounded-full px-3 py-1 text-sm bg-emerald-50 text-emerald-700 border border-emerald-200">8 折優惠</span>
    </div>
    <div class="mt-6 grid md:grid-cols-2 gap-6 items-start">
      <div class="rounded-2xl bg-white p-2 border border-slate-200">
        <img src="/assets/price-list.jpg" alt="價目表" class="rounded-xl w-full object-contain"/>
      </div>
      <div class="rounded-2xl bg-white p-6 border border-slate-200">
        <ul class="text-slate-700 space-y-2">
          <li>星期一至五：MOP 500 / hr（8 折 → MOP 400）</li>
          <li>週末及公眾假期：MOP 600 / hr（8 折 → MOP 480）</li>
          <li>夜間 18:00–22:00：MOP 800 / hr（8 折 → MOP 640）</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- Booking -->
  <section id="booking" class="max-w-7xl mx-auto px-5 py-16">
    <h2 class="text-2xl font-semibold">線上預約</h2>
    <p class="mt-2 text-slate-600">先選日期再選時段（整點、每次 1 小時）。系統會自動避免重覆。</p>

    <div class="mt-6 grid md:grid-cols-3 gap-6">
      <div class="md:col-span-2 rounded-2xl bg-white border border-slate-200 p-6">
        <div class="flex items-center justify-between">
          <button id="prevMonth" class="px-3 py-2 rounded-xl border border-slate-300">上個月</button>
          <h3 id="monthLabel" class="font-medium"></h3>
          <button id="nextMonth" class="px-3 py-2 rounded-xl border border-slate-300">下個月</button>
        </div>
        <div id="calendar" class="mt-4 grid grid-cols-7 gap-2 text-sm"></div>
        <div id="slots" class="mt-6 grid grid-cols-2 md:grid-cols-4 gap-2"></div>
      </div>

      <form id="bookingForm" class="rounded-2xl bg-white border border-slate-200 p-6 space-y-3">
        <div>
          <label class="text-sm text-slate-600">已選日期</label>
          <input id="date" name="date" class="w-full rounded-xl border border-slate-300 px-3 py-2" type="text" readonly required />
        </div>
        <div>
          <label class="text-sm text-slate-600">開始時間（1 小時）</label>
          <input id="start_time" name="start_time" class="w-full rounded-xl border border-slate-300 px-3 py-2" type="time" step="3600" required />
        </div>
        <div>
          <label class="text-sm text-slate-600">聯絡人</label>
          <input id="name" name="name" class="w-full rounded-xl border border-slate-300 px-3 py-2" placeholder="你的名字" required />
        </div>
        <div>
          <label class="text-sm text-slate-600">電話</label>
          <input id="phone" name="phone" class="w-full rounded-xl border border-slate-300 px-3 py-2" placeholder="+853 ..." required />
        </div>
        <div>
          <label class="text-sm text-slate-600">備註</label>
          <textarea id="notes" name="notes" class="w-full h-20 rounded-xl border border-slate-300 px-3 py-2" placeholder="人數 / 活動類型…"></textarea>
        </div>
        <button class="w-full rounded-full px-5 py-3 bg-black text-white hover:opacity-90">送出預約</button>
        <p id="status" class="text-sm text-slate-600"></p>
      </form>
    </div>
  </section>

  <!-- Contact -->
  <section id="contact" class="max-w-7xl mx-auto px-5 py-16">
    <div class="rounded-2xl bg-white border border-slate-200 p-6 grid md:grid-cols-2 gap-6">
      <div>
        <h2 class="text-2xl font-semibold">聯絡我們</h2>
        <ul class="mt-4 text-slate-700 space-y-2">
          <li>📞 租場熱線：<a href="tel:+85368021668" class="underline">+853 68021668</a></li>
          <li>🕘 開放時間：09:00–22:00</li>
          <li>📍 Fisherman’s Wharf Football Stadium, Macau</li>
        </ul>
      </div>
      <div class="rounded-xl border border-slate-200 p-4">
        <iframe class="w-full h-64 rounded-lg" loading="lazy" allowfullscreen src="https://www.openstreetmap.org/export/embed.html?bbox=113.538%2C22.187%2C113.544%2C22.194&layer=mapnik"></iframe>
      </div>
    </div>
  </section>

  <footer class="border-t border-slate-200">
    <div class="max-w-7xl mx-auto px-5 py-10 text-sm text-slate-500 flex flex-col md:flex-row gap-3 md:items-center md:justify-between">
      <p>© <span id="year"></span> Fisherman’s Wharf Football Stadium</p>
      <a href="#booking" class="hover:opacity-80">立即預約</a>
    </div>
  </footer>

<script>
// Optional backend (Supabase). 留空=示範模式（僅本機）。
const SUPABASE_URL = "";
const SUPABASE_ANON_KEY = "";
let client = null;
if (SUPABASE_URL && SUPABASE_ANON_KEY) { client = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY); }

const openHour = 9, closeHour = 22;
document.getElementById('year').textContent = new Date().getFullYear();

const monthLabel = document.getElementById('monthLabel');
const calendarEl = document.getElementById('calendar');
const slotsEl = document.getElementById('slots');
const dateInput = document.getElementById('date');
const startInput = document.getElementById('start_time');
const form = document.getElementById('bookingForm');
const statusEl = document.getElementById('status');

let current = new Date(); current.setDate(1);
renderCalendar();
document.getElementById('prevMonth').onclick = () => { current.setMonth(current.getMonth()-1); renderCalendar(); };
document.getElementById('nextMonth').onclick = () => { current.setMonth(current.getMonth()+1); renderCalendar(); };

function fmtDate(d){ return d.toISOString().slice(0,10); }
function pad(n){ return n.toString().padStart(2,'0'); }
function range(a,b){ return Array.from({length:b-a}, (_,i)=>i+a); }

async function renderCalendar(){
  monthLabel.textContent = `${current.getFullYear()}年 ${current.getMonth()+1}月`;
  calendarEl.innerHTML='';
  const firstDay = new Date(current);
  const startWeekday = (firstDay.getDay()+6)%7;
  const daysInMonth = new Date(current.getFullYear(), current.getMonth()+1, 0).getDate();
  for (let i=0;i<startWeekday;i++){ calendarEl.appendChild(cell('')); }
  for (let d=1; d<=daysInMonth; d++){
    const day = new Date(current.getFullYear(), current.getMonth(), d);
    const btn = cell(d);
    btn.classList.add('cursor-pointer','hover:bg-slate-50','rounded-lg','p-2','text-center');
    btn.onclick = ()=> selectDate(day);
    calendarEl.appendChild(btn);
  }
  const today = new Date();
  const defaultDay = (today.getMonth()===current.getMonth() && today.getFullYear()===current.getFullYear()) ? today : new Date(current.getFullYear(), current.getMonth(), 1);
  selectDate(defaultDay);
}
function cell(content){ const el=document.createElement('div'); el.textContent=content; el.className="min-h-[40px] grid place-items-center"; return el; }

async function selectDate(day){
  const d = new Date(day.getFullYear(), day.getMonth(), day.getDate());
  const dateStr = fmtDate(d);
  dateInput.value = dateStr;
  await renderSlots(dateStr);
}

async function fetchBookings(dateStr){
  if (client){
    const { data, error } = await client.from('bookings').select('start_time').eq('date', dateStr);
    if (error) { console.error(error); return []; }
    return data.map(r => r.start_time);
  } else {
    const all = JSON.parse(localStorage.getItem('fwfs_bookings')||'[]');
    return all.filter(b => b.date===dateStr).map(b => b.start_time);
  }
}

async function renderSlots(dateStr){
  slotsEl.innerHTML='';
  const taken = await fetchBookings(dateStr);
  range(openHour, closeHour).forEach(h => { 
    const t = `${pad(h)}:00`;
    const b = document.createElement('button');
    b.textContent = t; b.type="button";
    const disabled = taken.includes(t);
    b.className = "px-3 py-2 rounded-full border text-sm " + (disabled ? "bg-slate-100 text-slate-400 cursor-not-allowed" : "hover:bg-black hover:text-white");
    b.disabled = disabled;
    b.onclick = () => { startInput.value = t; Array.from(slotsEl.children).forEach(x=>x.classList.remove('ring','ring-[var(--accent)]')); b.classList.add('ring','ring-[var(--accent)]'); };
    slotsEl.appendChild(b);
  });
}

form.addEventListener('submit', async (e)=>{
  e.preventDefault();
  statusEl.textContent = "檢查時段中…";
  const payload = {
    date: dateInput.value,
    start_time: startInput.value,
    name: document.getElementById('name').value.trim(),
    phone: document.getElementById('phone').value.trim(),
    notes: document.getElementById('notes').value.trim(),
  };
  if (!payload.date || !payload.start_time) { statusEl.textContent = "請先選擇日期與時段。"; return; }
  const taken = await fetchBookings(payload.date);
  if (taken.includes(payload.start_time)) { statusEl.textContent = "此時段剛被預約，請換一個時段。"; await renderSlots(payload.date); return; }
  try { 
    if (client){
      const { error } = await client.from('bookings').insert(payload);
      if (error) throw error;
    } else {
      const all = JSON.parse(localStorage.getItem('fwfs_bookings')||'[]'); all.push(payload); localStorage.setItem('fwfs_bookings', JSON.stringify(all));
    }
    statusEl.textContent = "預約成功！我們將盡快電話確認。";
    await renderSlots(payload.date);
    form.reset(); document.getElementById('date').value = payload.date;
  } catch (err){ console.error(err); statusEl.textContent = "預約失敗：" + (err.message || err); }
});
</script>
</body>
</html>
